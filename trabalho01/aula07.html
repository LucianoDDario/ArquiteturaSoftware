<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="" />
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <title>Aula07</title>
  </head>

  <body>
    <div>
      <h1>Formulário</h1>

      <div class="formularioDados">
        <div class="colunaCampos">
          <label>Nome completo:</label>
          <input type="text" name="campo" id="nome" required />
        </div>

        <div class="infoNascTel">
          <div class="colunaCampos">
            <label>Data de Nascimento:</label>
            <input type="date" name="campo" id="data" required />
          </div>

          <div class="colunaCampos">
            <label>Telefone:</label>
            <input type="tel" name="campo" id="telefone" required />
          </div>
        </div>

        <div class="colunaCampos">
          <label>E-mail:</label>
          <input type="email" name="campo" id="email" required />
        </div>

        <div class="colunaCampos">
          <label>Senha:</label>
          <input type="password" name="campo" id="senha" required />
        </div>
      </div>

      <div class="fotoAtual">
        <h1>Foto atual:</h1>
        <div>
          <input type="file" class="foto" required />
        </div>
      </div>

      <div>
        <h1>Em que moeda prefere trabalhar?</h1>

        <div class="formularioMoeda">
          <div class="colunaMoeda">
            <input type="radio" name="moeda" id="real" /><label for="real">Real</label>
          </div>

          <div class="colunaMoeda">
            <input type="radio" name="moeda" id="dolar" /><label for="dolar">Dolar</label>
          </div>

          <div class="colunaMoeda">
            <input type="radio" name="moeda" id="euro" /><label for="euro">Euro</label>
          </div>

          <div class="colunaMoeda">
            <input type="radio" name="moeda" id="yen" /><label for="yen">Yen</label>
          </div>
        </div>
      </div>

      <div class="formularioExperiencia">
        <h1>Selecione as linguagens que já estudou:</h1>

        <div>
          <div class="colunaExperiencia">
            <input type="checkbox" name="linguaem" id="c" />
            <label for="c">C</label>
          </div>

          <div class="colunaExperiencia">
            <input type="checkbox" name="linguaem" id="c++" />
            <label for="c++">C++</label>
          </div>

          <div class="colunaExperiencia">
            <input type="checkbox" name="linguaem" id="html" />
            <label for="html">HTML</label>
          </div>

          <div class="colunaExperiencia">
            <input type="checkbox" name="linguaem" id="java" />
            <label for="java">Java</label>
          </div>

          <div class="colunaExperiencia">
            <input type="checkbox" name="linguaem" id="javascript" />
            <label for="javascript">Javascript</label>
          </div>

          <div class="colunaExperiencia">
            <input type="checkbox" name="linguaem" id="python" />
            <label for="python">Python</label>
          </div>
        </div>
      </div>

      <div class="formularioAssuntos">
        <h1>Seus assuntos favoritos:</h1>
        <form class="assuntos">
          <select name="assuntos" id="assunto" multiple required>
            <option value="Artes">Artes</option>
            <option value="Artes">Esportes</option>
            <option value="Artes">Games</option>
            <option value="Artes">Música</option>
          </select>
        </form>
      </div>

      <div class="formularioComentarios">
        <h1>Gostaria de fazer comentários?</h1>
        <div class="campoComentarios">
          <textarea name="comentarios" id="comentarios"></textarea>
        </div>
      </div>

      <div class="formularioBotoes">
        <button id="enviar">Enviar</button>
        <button id="limpar">Limpar</button>
      </div>
    </div>
  </body>

  <style>
    .colunaCampos {
      display: flex;
      flex-direction: column;
    }

    .infoNascTel {
      display: flex;
      flex-direction: row;
      gap: 16px;
    }

    .botoes {
      display: flex;
      flex-direction: row;
      gap: 40px;
    }
  </style>

  <script>
    $(document).ready(function () {
      $("#limpar").click(function () {
        $("#nome").val("");
        $("#email").val("");
        $("#senha").val("");
        $("#telefone").val("");
        $("#data").val("");
      });

      $("#enviar").click(function () {
        const nome = $("#nome").val();
        const email = $("#email").val();
        const senha = $("#senha").val();
        const telefone = $("#telefone").val();
        const dataNascimento = $("#data").val();

        if (!nome || !email || !senha || !telefone || !dataNascimento) {
          alert("Preencha todos os campos");
        }

        const regexContemNumero = /\d/;
        const regexDuasPalavras = /^\p{L}+(\s+\p{L}+)+$/u;
        const regexEmailCorreto = /[A-Z0-9._%+-]+@[A-Z0-9-]+.+.[A-Z]{2,4}/gim;
        const regexSenhaCorreta = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[^A-Za-z\d]).{10,30}$/;
        const regexTelefoneCorreto = /^\d{2} \d{9}$/;

        if (regexContemNumero.test(nome)) {
          alert("Nome não pode conter número");
        } else if (!regexDuasPalavras.test(nome)) {
          alert("Nome completo precisa de no mínimo duas palavras");
        } else if (!regexEmailCorreto.test(email)) {
          alert("E-mail não está correto");
        } else if (!regexSenhaCorreta.test(senha)) {
          alert(
            "A senha precisa ter no mínimo 10 caracteres, sendo pelo menos 1 número, um caractere especial e uma letra maiuscula"
          );
        } else if (!regexTelefoneCorreto.test(telefone)) {
          alert("O telefone precisa estar no formato 19 999998888");
        } else {
          const dataEscrita = new Date(dataNascimento + "T00:00:00");
          const dataMinima = new Date("1980-01-01T00:00:00");
          const dataMaxima = new Date("2005-12-31T00:00:00");

          if (dataEscrita < dataMinima || dataEscrita > dataMaxima) {
            alert("A data de nascimento precisa estar entre 01/01/1980 e 31/12/2005");
          } else {
            const pessoa = new Object();
            pessoa.nomeCompleto = nome;
            pessoa.email = email;
            pessoa.senha = senha;
            pessoa.telefone = telefone;
            pessoa.dataNascimento = dataNascimento;

            $.ajax({
              url: "https://jsonplaceholder.typicode.com/posts",
              type: "post",
              dataType: "json",
              contentType: "application/json",
              data: JSON.stringify(pessoa),
              success: function (data) {
                console.log(data);
                alert("Enviado com sucesso");

                $("#nome").val("");
                $("#email").val("");
                $("#senha").val("");
                $("#telefone").val("");
                $("#data").val("");
              },
              error: function (xhr, resp, text) {
                console.log(xhr, resp, text);
                alert("Ocorreu um erro ao enviar os dados");
              },
            });
          }
        }
      });
    });
  </script>
</html>
